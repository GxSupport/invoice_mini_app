# Задача 1.3: Переработка экрана ActDetailsPage под ActDetailResponse
Переработай экран **ActDetailsPage** (TGUI, Telegram pattern) так, чтобы он полностью заполнялся данными из **`ActDetailResponse`** (см. типы из предыдущего шага). Логику и визуал текущего экрана **сохранить**, только добавить поля.

### 1) Источник данных и пропсы

* Проп `act: Act | null` заменить на объект из **`ActDetailResponse`**:

    * Внутри использовать типы: `ActDetail`, `ActDoc`, `ContractDoc`, `ProductList`, `Product`, `StateText`.
* Все поля брать из `response.data`. Обеспечить нулл-безопасность (там, где `null`).

### 2) Секции и маппинг полей

**A. Сводка (Summary / ActHeader)**

* Номер и дата: `actdoc.actno`, `actdoc.actdate` (формат `dd.MM.yyyy`).
* Сумма к оплате: `payabletotal` (UZ locale, пробелы по разрядам, без символа валюты).
* Статус: чип справа c текстом `statetext.text`. Цвет по `statetext.status`:

    * `success`=green, `info|processing`=blue/yellow (warning), `danger|error`=red, `neutral|draft`=gray.
* Если есть `actdoc.acttext` — в конце секции показать «Краткое описание» (1–3 строки, «Показать больше»).

**B. Стороны и договор (ActSeller / реквизиты)**

* Продавец: `sellername` + `sellertin` (ИНН).
* Покупатель: `buyername` + `buyertin`.
* Филиалы (если есть): `sellerbranchcode/name`, `buyerbranchcode/name` — в подписи серым.
* Договор (если есть): `contractdoc.contractno`, `contractdoc.contractdate` → отдельный `Cell` с chevron «Открыть договор» (пока без перехода, просто заглушка).

**C. Содержимое/позиций (Items)**

* Итоговая строка секции: `Позиций: products.length • Сумма: sum(totalsum)`.
* Кнопка `Показать позиции` → **BottomSheet**:

    * Каждая позиция (`Product`): `ordno. name`
      `count × summa = totalsum`
      `packagename` (если есть), `catalogcode` (в подписи).
    * Формат чисел как в Summary.

**D. Примечание и ошибки**

* `notes` (если есть) — многострочно, с «Показать больше».
* Если `lasterror` не `null` — показать компактный предупреждающий баннер «Последняя ошибка: …».

**E. Метаданные**

* `id`, `created_at`, `updated_at` (внизу отдельной группой; даты в `dd.MM.yyyy HH:mm`).
* `filter.actdate`, `filter.contractdate` — показать как «Фильтр акта/договора» (если заданы).

### 3) Поведение/UX

* Loading: текущие **shimmer’ы** оставить, но высоты/ряды соответствуют финальным Cell.
* Error: `Placeholder + Retry` (как сейчас).
* Back: Telegram `WebApp.BackButton`.
* Deep-link (`eimzo://…`) — оставить, но не через `<Link>`, а через `window.location.href`.

### 4) Форматирование

* Дата: `YYYY-MM-DD` → `dd.MM.yyyy`.
* Деньги: `1 234 567` (0 дробей, UZ locale).
* ИНН: моноширинный стиль не нужен; можно группировать пробелами для читаемости.
* Тексты (name/notes) — усечение по 1–3 строкам.

### 5) Визуальные требования (как раньше)

* Только TGUI `Group/List/Cell`, у **каждого** `Cell` нижний divider (включая последний).
* Паддинги: 16px, высота `Cell`: 56–64px; иконки Lucide outline 20px, chevron 16px.
* Цвета/шрифты — системные токены TGUI (никаких кастомных hex).

### 6) Критерии готовности

* Все ключевые поля из `ActDetailResponse.data` отображены: `actdoc`, `contractdoc`, `seller/buyer (+ИНН)`, `payabletotal`, `statetext`, `productlist.products`, `notes`, `lasterror`, `created_at/updated_at`, `filter.*`.
* Позиции открываются в BottomSheet; суммы корректно форматированы; статус-чип и цвет соответствуют `statetext.status`.
* Loading/Error/Empty состояния консистентны; Telegram pattern соблюден (divider, paddings, типографика).
